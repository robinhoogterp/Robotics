#include "Keyboard.h"

int main(void)
{
	int pin = 26;
	int pin_forward = 27;
	int pin_backwards = 28;
	int pwm_pin = 0;
	int pwmValue = 0;

	char ch;
	ch = getch();


	wiringPiSetup();
	softPwmCreate(pin, 0, 100);
	pinMode(pin_forward,OUTPUT);
	pinMode(pin_backwards,OUTPUT);

	std::cout << "Gebruik W of S om te rijden" << std::endl;
	
			while (true)
			{
			if (ch == 'w') {

				digitalWrite(pin_forward, 1);
				digitalWrite(pin_backwards, 0);

				pwmValue += 10;
				if (pwmValue > 100)
					pwmValue = 100;

				softPwmWrite(pwm_pin, pwmValue);
				delay(2);
			}
				else{
				digitalWrite(pin_forward, 0);
				digitalWrite(pin_backwards, 0);

				pwmValue = 0;

				softPwmWrite(pwm_pin, pwmValue);
			}
			if (ch == 's') {
				digitalWrite(pin_forward, 0);
				digitalWrite(pin_backwards, 1);

				pwmValue -= 10;
				if (pwmValue < 0)
					pwmValue = 0;

				softPwmWrite(pwm_pin, pwmValue);

				delay(2);
			} 
			else{
				digitalWrite(pin_forward, 0);
				digitalWrite(pin_backwards, 0);

				pwmValue = 0;

				softPwmWrite(pwm_pin, pwmValue);
			}


		};
	return 0;
}
